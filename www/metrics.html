<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>

<script src="jquery.min.js" type="text/javascript"></script>

<body>

roomInfo list<br/>
status:1 初始化 2 游戏中 3 已结束 4 等待玩家准备<br/>
<div id="roomDom">

</div>
<br/>
wait...
<div id="">

</div>

<script>
    var serverHostUri = "/www/metrics";
    $.ajax({
        // data: {username:$("#username").val(), content:$("#content").val()},
        // dataType: "json",
        type: "GET",
        // url: "http://192.168.192.91:2222/www/getServer",
        // url: "http://127.0.0.1:2222/www/getServer",
        url:serverHostUri,
        success: function(data){
            init(data);
        }
    });

    function init(data){
        var roomHtml = initRoom(data.roomList);
        $("#roomDom").html(roomHtml);

        // var serverHtml = initActionMap(data.ActionMap.server,data.JsonFormat)
        // $("#server").html(serverHtml);
    }

    function initRoom(data){
        if (JSON.stringify(data) == "{}" || data.length <= 0){
            return "暂无";
        }
        var html = "<table border='1'>";
        for(let key1  in data){
            html += "<tr><td><table>";
            for(let key2  in data[key1]){
                if (key2 == "playerList"){
                    html += "<tr><td>"+key2+"</td><td><table>" ;
                    for(let inc  in data[key1][key2]){
                        html += "<tr><td>pid:"+data[key1][key2][inc]['id']+"</td></tr>";
                    }
                    html += "</table></td></tr>";
                }else{

                    if(key2 == "addTime" || key2 == "timeout"){
                        var unixTimestamp = new Date(data[key1][key2]*1000);
                        var commonTime = unixTimestamp.toLocaleString()
                        html += "<tr><td>"+key2+"</td><td>"+commonTime+"</td></tr>";
                    }else{
                        html += "<tr><td>"+key2+"</td><td>"+data[key1][key2]+"</td></tr>";
                    }

                }

            }
            html += "</table></td></tr>";
            // html += "<tr><td>"+data[key].Id+"</td><td>"+data[key].Action+"</td><td>"+data[key].Desc+"</td><td>"+JsonFormat[key]+"</td></tr>"
        }
        html += "</table>";
        return html;
    }

</script>
</body>
</html>